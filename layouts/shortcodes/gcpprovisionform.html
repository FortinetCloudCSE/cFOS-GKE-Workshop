<script>
  function formSubmit() {
    alert('In formSubmit');

    const params = {
      email: document.getElementById('email').value,
      workshop: 'cfos-gke'
    }
    alert('params : ' + JSON.stringify(params));
    var postdata = "email=" + document.getElementById('email').value + "&workshop=cfos-gke";
    alert('postdata : ' + postdata);

    var xhr = new XMLHttpRequest()
    xhr.open('POST', 'https://us-central1-cse-us-341516.cloudfunctions.net/gcp-account-provision', false);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.setRequestHeader('Access-Control-Allow-Origin', '*');
    xhr.setRequestHeader('Access-Control-Allow-Methods', 'POST');
    alert('XHR1 : ' + JSON.stringify(xhr));
    xhr.onreadystatechange = function () {
      alert('In  onreadystatechange: ');
      alert('XHR-readyState : ' + JSON.stringify(xhr.readyState));
      alert('XHR-status : ' + JSON.stringify(xhr.status));
      if (xhr.readyState === 4 && xhr.status === 200) {
        alert("ok");
        var res = JSON.parse(xhr.response);
        alert(res);
      }
    };
    alert('XHR2 : ' + JSON.stringify(xhr));
    xhr.send(postdata);
    return false;
  }

  
</script>

<form id="provision-lab" onsubmit="return formSubmit();">
  <label for="email">Please enter your email address</label>
  <input type="email" id="email" name="email" value="" />
  <input type="submit" value="Provision" />
</form>